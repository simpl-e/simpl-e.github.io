
<style>
    #ranking .user {
        position: relative;
    }
    #ranking .user:nth-child(odd) {
        background: gainsboro;
    }

    #ranking .user > * {
        display: inline-block;
        vertical-align: top;
    }

    #ranking .user .picture {
        width: 60px;
        height: 60px;
    }

    #ranking .user .num {
        background-color: red;
        color: white;
        font-size: 24px;
        width: 60px;
        text-align: center;
        line-height: 60px;
    }

    #ranking .user .name {
        margin-left: 15px;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
    }

    #ranking .user .fa {
        font-size: 24px;
        position: absolute;
        right: 15px;
        line-height: 60px;
    }
</style>

<template>
    <div id='ranking'>

        <div v-for='(user, index) in users' class='user'>
            <div class='num'>
                {{index + 1}}
            </div>
            <div class='picture' v-bind:style="'background-image:url(' + user.profile_picture + ')'"></div>
            <div class='name'>
                <div>
                    {{user.username}}
                </div>
                <div style="color:grey">
                    {{user.full_name}}
                </div>
            </div>

            <i class="fa fa-arrow-up"></i>
        </div>

    </div>
</template>

<script>

    define({
        template: template,
        data: {
            users: {}
        },
        mounted: function () {
            var self = this;

            var access_token = localStorage.getItem("access_token");
            if (!access_token) {
                login();
                return;
            }

            //update server
            var access_token = localStorage.getItem("access_token");
            if (access_token) {
                $.post(window.server + "UserController@update", {
                    access_token: access_token
                }, function (users) {
                    self.users = users;
                });
            }

        }
    });

</script>
